var AddressDadata=React.createClass({displayName:"AddressDadata",mixins:[EventEmitterMixin,SuggestAddressDaDataMixin],getInitialState:function(){return{value:this.props.value?decodeURIComponent(this.props.value):""}},getDefaultProps:function(){return{suggestTimeout:500}},componentWillUnmount:function(){this.$suggestTimeoutId&&clearTimeout(this.$suggestTimeoutId)},componentWillReceiveProps:function(e){var t=e.value;_.isObject(t)&&(t=t.value),t!==this.state.value&&this.setState({value:t})},onChange:function(e){e!==this.state.value&&(this.setState({value:e}),this.props.onChange(this.props.id,e),this.getSuggestions(e))},getSuggestions:function(e){var t=this;this.$suggestTimeoutId&&clearTimeout(this.$suggestTimeoutId),this.$suggestionDefer=$.Deferred(),this.$suggestTimeoutId=setTimeout(function(){var s={query:e,count:5,restrict_value:!0};t.props.city&&(s.locations=[{city:t.props.city}]),t.props.region&&(s.locations=[{region:t.props.region}]),t.suggestAddress(s).then(function(e){"rejected"!==t.$suggestionDefer.state()&&(t.$suggestionDefer.resolve(),t.setState({addressSuggests:e}))})},this.props.suggestTimeout)},changeIndex:function(e,t){t&&this.props.linkedFieldIndexId&&this.dispatch("valuechanged",{fieldName:e,fieldValue:t})},onSuggestSelect:function(e){this.setState({addressSuggests:[]});var t=this.getSuggestionText(e).substring(0,this.props.maxLength),s=this.getSuggestionPostalCode(e);this.setState({value:t}),this.props.onChange(this.props.id,{value:t,invalid:!1}),this.changeIndex(this.props.linkedFieldIndexId,s)},onSuggestHide:function(){this.setState({addressSuggests:[]})},onBlur:function(){this.$suggestionDefer&&"resolved"!==this.$suggestionDefer.state()&&this.$suggestionDefer.reject("cancelled"),this.setState({addressSuggests:[]})},render:function(){return React.createElement(Input,{label:this.props.label,errorMessage:this.props.errorMessage,invalid:this.props.invalid,maxLength:this.props.maxLength,className:this.props.className,onChange:this.onChange,value:this.state.value,onFocus:this.props.onFocus,onBlur:this.onBlur},this.state.addressSuggests&&this.state.addressSuggests.length?React.createElement(DropdownElements,{elements:this.state.addressSuggests,onHide:this.onSuggestHide,onElementSelect:this.onSuggestSelect,matchValue:this.state.value}):!1)}});!function(e){var t={onMouseDown:function(){if(this.props.autofill){var e=this.calculateSuggestions(this.state.value);e&&e.length?this.setState({open:!this.state.open,suggestions:this.calculateSuggestions(this.state.value)}):this.setState({open:!1})}},getElementWidth:function(){return this.refs[this.props.id].getDOMNode().getElementsByTagName("input")[0].clientWidth},getElementCssTextStyle:function(){var e=this.refs[this.props.id].getDOMNode().getElementsByTagName("input")[0],t=window.getComputedStyle(e,null);return t.fontWeight+" "+t.fontSize+" "+t.fontFamily},hideSuggestions:function(){this.props.autofill&&(this.$dispatchClearSuggestionFields(),this.setState({open:!1}))},showSuggestions:function(){this.props.autofill&&this.state.suggestions&&this.state.suggestions.length&&this.setState({open:!0})},onElementSelect:function(e){this.hideSuggestions(),_.isFunction(this.props.onChange)&&this.props.onChange(this.props.id,e.text),this.$dispatchAutofillEvent(e,!1)},$dispatchClearSuggestionFields:function(){this.dispatch("clearSuggestionFields",{fieldSet:this.props.fieldSet,groupId:this.props.groupId,suggestionPreview:!0,text:""})},$dispatchAutofillEvent:function(e,t){var s={};s.fieldSet=this.props.fieldSet,s.token=this.props.token,s.suggestionData=e,t&&(s.suggestionPreview=t),this.dispatch("autofillLinkedElements",s)},onElementHover:function(e){null!=e&&this.$dispatchAutofillEvent(this.state.suggestions[e].data,!0)},getAutofillSuggestions:function(){function e(e){function t(e,t){return c.filter(function(e){return e.fields.every(function(e){var s=o(t,e.token);return s?s.token!==i.props.token?r(e.value,s.name):!0:void 0})})}function s(e,t){return t.length?t.find(function(t){return e.every(function(e){return t.fields.find(function(t){return t.token===e.token&&t.value===e.value})})}):!1}function a(e,t){return e.qualifier||t.qualifiers&&!t.qualifiers.length?t.qualifiers&&t.qualifiers.length?t.qualifiers.includes(e.qualifier):void 0:!0}function o(e,t){return e.find(function(e){return e.token===t})}function r(e,t){var s=i.props.values[t];return s?s instanceof Object&&!s.value?!0:s&&s.value?e.toUpperCase()===s.value.toUpperCase():e.toUpperCase()===s.toUpperCase():!0}var l=n(i.props.groupId),c=e.map(function(e){var t=Object.assign({},e);return t.fields=e.fields.filter(function(e){return l.find(function(t){return t.token===e.token&&a(t,e)})}),t}).sort(function(e,t){return t.fields.length-e.fields.length}),u=[];return t(c,l).forEach(function(e){s(e.fields,u)||u.push(e)}),u}function t(t,n,i,a,o){function r(e,t,n,i,a){var o=[];return e.forEach(function(e){var r=e.fields.find(function(e){return n?e.token===t&&e.qualifiers&&e.qualifiers.length&&e.qualifiers.includes(n)&&e.lang===i:e.token===t&&e.lang===i});r&&o.push({text:r.value,note:s(e,r),data:{time:e.time,fieldSet:e.section,qualifier:n,groupId:a,text:r.value}})}),o}if(n){var l=e(t),c=[];return n instanceof Array?n.forEach(function(e){c=c.concat(r(l,e.name,i,a,o))}):c=r(l,n,i,a,o),c}}function s(e,t){function s(e,t,s){e.values.length-1===e.lastIndex?(d.length-1===s?l[s].push(t):l[s][e.lastIndex]=t+", ",e.added=!0):l[s].push(t)}function a(e,t){0!==e.lastIndex&&(d.length-1!=t?l[t][e.lastIndex-1]+="...,":l[t][e.lastIndex-1]+="...")}function o(e,t,n){var o=r(t,i.getElementCssTextStyle())+g;c>o+m&&u>o?(s(e,t,n),m+=o,e.lastIndex++):(a(e,n),e.added=!0)}function r(e,t){var s=document.createElement("canvas"),n=s.getContext("2d");n.font=t;var i=n.measureText(e);return i.width}var l=[],c=2.7*i.getElementWidth(),u=.9*i.getElementWidth(),p=n(i.props.groupId),h=e.fields.slice(),d=[];p.forEach(function(e){var s=h.find(function(t){return t.token===e.token});if(s&&t.token!==s.token&&s.value){var n=s.value.split(" ");d.push({values:n,lastIndex:0,added:!1}),l.push([])}});for(var m=0,g=r("  ",i.getElementCssTextStyle()),f=!!l.length;f;)d.forEach(function(e,t){if(!e.added){var s=e.values[e.lastIndex];s?o(e,s,t):e.added=!0}}),f=d.find(function(e){return!e.added});return l.length?l.reduce(function(e,t){return e.concat(t)}).join(" "):""}function n(e){return i.props.formTokens.filter(function(t){return t.groupId===e&&!i.props.invisibleFields.includes(t.name)})}var i=this;return t(this.props.suggestions,this.props.token,this.props.qualifier,this.props.lang,this.props.groupId)},calculateSuggestions:function(e){function t(e,t){return e.sort(function(e,t){return t.data.time-e.data.time}).slice(0,t)}if(!this.props.autofill||!e)return[];var s=this,n=this.getAutofillSuggestions()||[];return e&&(n=n.filter(function(t){return t.text.substr(0,e.length).toUpperCase()===e.toUpperCase()&&t.text.length!==e.length})),t(n,s.props.suggestionsCount||5)}};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.AutofillMixin=t):"function"==typeof define&&define.amd?define([],function(){return t}):e.AutofillMixin=t}(this);var EmptyPageNote=React.createClass({displayName:"EmptyPageNote",render:function(){var e=React.addons.classSet,t=e({"empty-page-note":!0,"empty-page-note--compact":this.props.compact});return React.createElement("div",{className:t},React.createElement("div",{className:"empty-page-note__text"},this.props.text),this.props.children)}}),Header=React.createClass({displayName:"Header",userMenuElements:[{text:messages.header.mySendingsTitle,data:"tracking"},{text:messages.header.personalAccount,data:"user-profile"},{text:messages.header.quit,data:"exit"}],getInitialState:function(){var e=this.props.authorized||-1!==document.cookie.indexOf("auth=1"),t=this;return e&&$.get(this.props.getTrackItemsUpdatedCountUrl,function(e){t.setState({updatesCount:e.count})}),this.listenUpdatesCountEvent(),{authorized:e,name:this.props.userName?this.props.userName:messages.header.defUserName,postIdLoginUrl:this.props.postIdLoginUrl?this.props.postIdLoginUrl:"/pochta-id/build/main.html",postIdUserAccountUrl:this.props.postIdUserAccountUrl?this.props.postIdUserAccountUrl:"",trackingURL:this.props.trackingURL?this.props.trackingURL:"tracking.html",postIdLogoutUrl:this.props.postIdLogoutUrl,updatesCount:null}},componentDidUpdate:function(e,t){var s=t.showMobileMenu,n=this.state.showMobileMenu;!s&&n?setTimeout(function(){$(document).bind("click touchend",this.handleDocumentClick),$(document).bind("touchmove",this.preventContentScroll)}.bind(this),0):s&&!n&&($(document).unbind("click touchend",this.handleDocumentClick),$(document).unbind("touchmove",this.preventContentScroll))},listenUpdatesCountEvent:function(){var e=this;document.createEvent?document.addEventListener&&document.addEventListener("updatesCountChange",function(t){e.decrementUpdatesCount(e)},!1):(document.documentElement.updatesCountChange=0,document.documentElement.attachEvent("onpropertychange",function(t){"updatesCountChange"==t.propertyName&&(e.decrementUpdatesCount(e),document.documentElement.detachEvent("onpropertychange",arguments.callee))}))},decrementUpdatesCount:function(e){e.state.updatesCount&&e.setState({updatesCount:--e.state.updatesCount})},preventContentScroll:function(e){$(e.target).is("body")&&e.preventDefault()},handleDocumentClick:function(e){var t=$(e.target),s=!!t.closest(this.refs.mobileMenu.getDOMNode()).length;s||this.setState({showMobileMenu:!1})},onBalloonToggle:function(){setTimeout(function(){var e=$(this.getDOMNode()).find(".header__user-menu-balloon"),t=$(this.getDOMNode()).find(".header__btn-user-menu");e.is(":visible")&&e.toggleClass("header__user-menu-balloon--right-align",t.width()<e.outerWidth())}.bind(this),0)},onChange:function(e,t){var s={};s[e]=t,this.setState(s)},onUserMenuSelect:function(e){"exit"===e?this.state.postIdLogoutUrl?location.href=this.state.postIdLogoutUrl:(document.cookie="auth=0; expires=Fri, 3 Aug 1970 20:47:11 UTC; path=/",location.reload()):"user-profile"===e?location.href=this.state.postIdUserAccountUrl:"tracking"===e&&(location.href=this.state.trackingURL)},onAuthorize:function(){location.href=this.state.postIdLoginUrl},toggleMobileMenu:function(e){e.preventDefault(),this.setState({showMobileMenu:!this.state.showMobileMenu})},render:function(){var e=React.addons.classSet,t=e({"header__btn-all-services":!0}),s=isMobileDevice(),n=this.state.authorized,i=parseInt(this.state.updatesCount),a=!!i&&i>0;return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("a",{className:"header__logo",href:"/"}),React.createElement("div",{className:"header__menu"},React.createElement("a",{href:"/support",className:t},messages.header.support),n&&a&&React.createElement("a",{href:this.state.trackingURL,className:"header__menu-updates-count"},i),n&&React.createElement(Balloon,{align:"left",ref:"balloon",elements:this.userMenuElements,onSelect:this.onUserMenuSelect,className:"header__user-menu-balloon",onClick:this.onBalloonToggle},React.createElement("div",{className:"text-button header__btn-user-menu"},this.state.name)),!n&&React.createElement("a",{href:this.state.postIdLoginUrl,className:"header__btn-login",onClick:this.onAuthorize},messages.header.logIn)),React.createElement("div",{className:"header__mobile-menu-btn",onTouchEnd:this.toggleMobileMenu,onClick:!s&&this.toggleMobileMenu},n&&a&&React.createElement("div",{className:"header__menu-updates-count"},i),React.createElement("div",{className:"header__mobile-menu-btn-icon"}))),React.createElement(MobileMenu,React.__spread({ref:"mobileMenu"},this.state)))}}),MobileMenu=React.createClass({displayName:"MobileMenu",getInitialState:function(){return null},componentWillReceiveProps:function(e){var t=$(".product-sticky-summary-container"),s=$("body");s.off("transitionend webkitTransitionEnd");var n=e.showMobileMenu!==this.props.showMobileMenu;if(n){var i=device.ios();if(e.showMobileMenu?i||$("html").css("overflow","hidden"):$("html").css("overflow",""),t.length){var a="transition"in t[0].style;if(e.showMobileMenu){if(a){var o=t.offset().top-$(".header-container").outerHeight()-(i?0:$("body").scrollTop());t.css({top:o})}}else a?s.one("transitionend webkitTransitionEnd",function(){t.css("top",""),s.off("transitionend webkitTransitionEnd")}):t.css("top","")}s.toggleClass("body--mobile-menu",e.showMobileMenu)}},onTouchStart:function(e){this.startY=e.touches[0].clientY},onTouchMove:function(e){var t=this.startY;if(null!==t){var s=e.touches[0].clientY,n=this.refs.menu.getDOMNode(),i=n.scrollHeight-n.offsetHeight,a=s-t,o=n.scrollTop,r=n.scrollTop-a,l=!o&&0>r,c=o>=i&&r>i;l||c?(this.startY=s,e.preventDefault()):this.startY=null}},render:function(){var e=React.addons.classSet,t=e({"mobile-menu-wrapper":!0,"mobile-menu-wrapper--visible":this.props.showMobileMenu}),s=location.pathname.replace(/.*\/build\/(.*)/,"$1").replace(/\/$/,"").split("/").pop();return s="/"+s,React.createElement("div",{className:t},React.createElement("div",{ref:"menu",className:"mobile-menu",onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove},React.createElement(MobileMenuUser,React.__spread({},this.props)),React.createElement(MobileMenuSiteNavigation,{path:s}),React.createElement(MobileMenuJuridical,null),React.createElement(MobileMenuCompany,{path:s}),React.createElement(MobileMenuSocials,null)))}}),MobileMenuSiteNavigation=React.createClass({displayName:"MobileMenuSiteNavigation",buttons:[{link:"/",text:messages.mobileMenu.main},{link:"/tracking",text:messages.mobileMenu.tracking},{link:"/letters",text:messages.mobileMenu.letters},{link:"/parcels",text:messages.mobileMenu.parcels},{link:"/money-transfer",text:messages.mobileMenu.moneyTransfer},{link:"/offices",text:messages.mobileMenu.postOffices},{link:"/courier",text:messages.mobileMenu.courier},{link:"/postcards",text:messages.mobileMenu.postcards},{link:"/forms-list",text:messages.mobileMenu.formsList},{link:"/post-index",text:messages.mobileMenu.index},{link:"//zakaznoe.pochta.ru",openInNewTab:"true",text:messages.mobileMenu.eDocs},{link:"//podpiska.pochta.ru",openInNewTab:"true",text:React.createElement("span",null,messages.mobileMenu.subscription,React.createElement("span",{className:"main-page__menu-beta-note"},"beta"))},{link:"/support",text:messages.mobileMenu.support}],render:function(){return React.createElement("div",{className:"mobile-menu__site-navigation"},_.map(this.buttons,function(e,t){return React.createElement(MobileMenuSiteNavigationButton,React.__spread({key:t},e,{path:this.props.path}))}.bind(this)))}}),MobileMenuSiteNavigationButton=React.createClass({displayName:"MobileMenuSiteNavigationButton",render:function(){var e=React.addons.classSet,t=this.props.link,s=this.props.path,n=t===s||"/"===t&&!s,i=e({"mobile-menu__site-navigation-button":!0,"mobile-menu__site-navigation-button--active":n});return n?React.createElement("div",{className:i},this.props.text):React.createElement("a",{href:this.props.link,target:"true"===this.props.openInNewTab?"_blank":"_self",className:i},this.props.text)}}),MobileMenuUser=React.createClass({displayName:"MobileMenuUser",getInitialState:function(){return this.props.authorized?this.buttons=[{name:"username",text:this.props.name,user:!0},{name:"tracking",link:"/tracking",text:messages.mobileMenu.mySendings,count:null},{name:"account",link:this.props.postIdUserAccountUrl,text:messages.mobileMenu.personalAccount},{name:"logout",link:this.props.postIdLogoutUrl,text:messages.mobileMenu.logOut}]:this.buttons=[{link:this.props.postIdLoginUrl,text:messages.mobileMenu.logIn}],null},render:function(){var e=parseInt(this.props.updatesCount),t=React.addons.classSet,s=t({"mobile-menu__user":!0,"mobile-menu__user--authorized":this.props.authorized});return React.createElement("div",{className:s},_.map(this.buttons,function(t,s){return"tracking"===t.name&&(t.count=e?e:null),React.createElement(MobileMenuUserButton,React.__spread({key:s},t))}))}}),MobileMenuUserButton=React.createClass({displayName:"MobileMenuUserButton",render:function(){var e=React.addons.classSet,t=e({"mobile-menu__user-button":!0,"mobile-menu__user-button--user":this.props.user});return this.props.link?React.createElement("a",{href:this.props.link,className:t},this.props.text,!!this.props.count&&React.createElement("div",{className:"mobile-menu__user-button-count"},this.props.count)):React.createElement("div",{className:t},this.props.text,!!this.props.count&&React.createElement("div",{className:"mobile-menu__user-button-count"},this.props.count))}}),MobileMenuJuridical=React.createClass({displayName:"MobileMenuJuridical",buttons:[{link:"//tracking.pochta.ru",openInNewTab:"true",text:messages.mainPage.mainPageMenuBusiness},{link:"//izdatel.russianpost.ru",openInNewTab:"true",text:messages.mainPage.mainPageMenuAgency}],render:function(){return React.createElement("div",{className:"mobile-menu__juridical"},_.map(this.buttons,function(e,t){return React.createElement(MobileMenuJuridicalButton,React.__spread({key:t},e))}))}}),MobileMenuJuridicalButton=React.createClass({displayName:"MobileMenuJuridicalButton",render:function(){return React.createElement("a",{href:this.props.link,target:"true"===this.props.openInNewTab?"_blank":"_self",className:"mobile-menu__juridical-button"},this.props.text)}}),MobileMenuCompany=React.createClass({displayName:"MobileMenuCompany",buttons:[{link:"/news-list",text:messages.mobileMenu.pressCenter},{link:"/about-missia",text:messages.mobileMenu.about}],render:function(){return React.createElement("div",{className:"mobile-menu__company"},_.map(this.buttons,function(e,t){return React.createElement(MobileMenuCompanyButton,React.__spread({key:t},e))}))}}),MobileMenuCompanyButton=React.createClass({displayName:"MobileMenuCompanyButton",render:function(){return React.createElement("a",{href:this.props.link,className:"mobile-menu__company-button"},this.props.text)}}),MobileMenuSocials=React.createClass({displayName:"MobileMenuSocials",render:function(){return React.createElement("div",{className:"mobile-menu__socials"},React.createElement("a",{target:"_blank",href:"http://vk.com/russianpost",className:"mobile-menu__socials-button mobile-menu__socials-button--vk"}),React.createElement("a",{target:"_blank",href:"http://www.facebook.com/ruspost?filter=2",className:"mobile-menu__socials-button mobile-menu__socials-button--fb"}),React.createElement("a",{target:"_blank",href:"https://twitter.com/ruspostofficial",className:"mobile-menu__socials-button mobile-menu__socials-button--twitter"}))}}),HelpBaloonsOperationsMixin={checkIfTooltipShowedByName:function(e){return docCookies.hasItem(e)},setTooltipShowed:function(e){docCookies.setItem(e,"showed","Fri, 31 Dec 9999 23:59:59 GMT")},isTooltipOutdated:function(){return moment().isAfter(moment("2016-02-25"))}},TrackingHelpBalloon=React.createClass({displayName:"TrackingHelpBalloon",render:function(){var e=React.createElement("div",null,messages.trackingHelpBaloon.descr);return React.createElement(Balloon,{content:e,className:"tracking-help-balloon",containerClassName:"tracking-help-balloon-container"},React.createElement("div",{className:"text-button tracking-help "+(this.props.className||"")},messages.trackingHelpBaloon.howTo,React.createElement("div",{className:"help-button"})))}}),AddFile=React.createClass({displayName:"AddFile",getInitialState:function(){return{files:[{id:_.uniqueId("file-")}],multiple:this.props.multiple!==!1,prefix:this.props.prefix?this.props.prefix:"file-"}},onAdd:function(e){var t=this.state.files;this.state.multiple&&t.push({id:_.uniqueId("file-")}),this.setState({files:t})},onDelete:function(e){var t;t=this.state.multiple?_.filter(this.state.files,function(t){return t.id!==e}):[{id:_.uniqueId("file-")}],this.setState({files:t})},render:function(){var e=(React.addons.classSet,this);return React.createElement("div",{className:"add-file "+(this.props.className?this.props.className:"")},React.createElement("form",{action:this.props.uploadURL,method:"POST",encType:"multipart/form-data"},_.map(this.state.files,function(t,s){var n=e.state.prefix;return e.state.multiple&&(n+=s),React.createElement(AddFileElement,React.__spread({name:n,key:t.id,onAdd:e.onAdd},e.props,{onDelete:e.onDelete,multiple:e.state.multiple,id:t.id}))})))}}),AddFileElement=React.createClass({displayName:"AddFileElement",getInitialState:function(){return{addButton:!0,name:this.props.moreLabel&&this.props.files.length?this.props.moreLabel:this.props.label,progress:0}},componentDidMount:function(){this.refs.input.getDOMNode();if(window.mOxie){var e=new mOxie.FileInput({browse_button:this.getDOMNode(),multiple:this.props.multiple});e.onchange=this.handleFile,e.init()}},componentWillUpdate:function(e,t){this.state.progress!==t.progress&&this.updateProgress(this.state.progress,t.progress)},updateProgress:function(e,t){$(this.getDOMNode()).circleProgress({value:t,animationStartValue:e})},handleFile:function(e){var t=this,s=$(e.target).prop("files")[0],n=function(e){var e=e.total?e.loaded/e.total:1;t.setState({progress:e})},i=function(e){t.setState({uploaded:!0,uploading:!1})},a=window.FormData?new FormData:new mOxie.FormData;a.append("file",s,s.name),$.ajax({url:"upload.php",type:"POST",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=n,e.upload.addEventListener("progress",n,!1),e.upload.addEventListener("load",i,!1)),e},success:i,error:function(e,t){},data:a,cache:!1,contentType:!1,processData:!1}),$(this.getDOMNode()).circleProgress({value:0,size:18,animation:{duration:100,easing:"linear"},thickness:3,startAngle:-1.58,fill:{color:"#999"},emptyFill:"#FFF"}),this.setState({name:s.name,size:s.size,type:s.type,uploading:!0,addButton:!1}),this.props.onAdd(this.props.id)},onAddClick:function(){if(!window.mOxie){var e=this.refs.input.getDOMNode();e.click()}},onDeleteClick:function(){this.props.onDelete(this.props.id)},render:function(){var e=React.addons.classSet,t=e({"add-file-button":!0,"add-file-button--progress":this.state.uploading,"add-file-button--uploaded":this.state.uploaded}),s=e({"add-file-button__filename":!this.state.addButton,"add-file-button__title":this.state.addButton});return React.createElement("div",{className:t,onClick:this.state.addButton?this.onAddClick:!1},React.createElement("div",{className:"add-file-button__icon",onClick:this.state.uploaded?this.onDeleteClick:!1}),React.createElement("div",{className:s},this.state.name),React.createElement("input",{name:this.props.name,type:"file",multiple:this.props.multiple,hidden:!0,className:"ws-filereader",ref:"input",multiple:!1,accept:"*",onChange:this.handleFile}))}}),Balloon=React.createClass({displayName:"Balloon",mixins:[HelpBaloonsOperationsMixin],prepareElements:function(e){return _.isArray(e)&&_.map(e,function(e){return _.isObject(e)?_.has(e,"data")||(e.data=e.text):e={text:e,data:e},e})},getInitialState:function(){return{open:this.props.open,uid:_.uniqueId("balloon-1"),elements:this.prepareElements(this.props.elements),align:this.props.align||"center",marginLeft:this.props.marginLeft||0,isMenu:!!this.props.elements,mount:!1}},componentDidMount:function(){var e=this.getDOMNode();this.setState({element:this.props.element||$(e).children().first()})},componentWillUnmount:function(){$("body").unbind("click",this.handleDocumentClick)},componentDidUpdate:function(e,t){this.state.open?$("body").bind("click",this.handleDocumentClick):$("body").unbind("click",this.handleDocumentClick)},componentWillMount:function(){this.setState({open:this.props.open})},componentWillReceiveProps:function(e){var t={elements:this.prepareElements(e.elements)};e.element&&(t.element=e.element),_.isBoolean(e.open)&&e.open!==this.props.open&&(t.open=e.open),this.setState(t)},handleDocumentClick:function(e){(this.props.help||!$(e.target).closest(this.getDOMNode()).length)&&this.close()},open:function(){this.setState({open:!0})},close:function(){this.props.help&&this.setTooltipShowed(this.props.name||""),this.setState({open:!1})},toggle:function(e){e.stopPropagation(),this.setState({open:!this.state.open}),_.isFunction(this.props.onClick)&&this.props.onClick(e)},onSelect:function(e){this.close(),_.isFunction(this.props.onSelect)&&this.props.onSelect(e)},render:function(){var e=this;return React.createElement("span",{className:"balloon-toggle-button "+(this.props.containerClassName||"")},this.props.children&&React.addons.cloneWithProps(this.props.children,{onClick:this.props.onClick!==!1&&this.toggle,ref:"button"}),React.createElement(React.addons.CSSTransitionGroup,{transitionName:"balloon"},this.state.open&&(this.state.elements&&this.state.elements.length||this.props.content)?React.createElement(BalloonInner,React.__spread({},this.state,{key:this.state.uid,className:this.props.className,arrowPosition:this.props.arrowPosition,onClick:this.props.onClick,help:this.props.help,arrow:this.props.arrow}),this.state.elements?_.map(this.state.elements,function(t,s){return React.createElement(BalloonMenuElement,{key:s,onClick:e.onSelect.bind(e,t.data)},t.text)}):this.props.content):!1))}}),BalloonInner=React.createClass({displayName:"BalloonInner",mixins:[React.addons.PureRenderMixin],componentDidMount:function(){this.show()},show:function(e){function t(){switch(n.align){case"left":i=r-u,c>l&&o.css("left",l/2);break;case"center":i=r-u+(h-c/2),0>u+i?(n.align="left",t()):u+c+i>p&&(n.align="right",t());break;case"right":i=r+l-(u+c),c>l&&o.css("left",c-l+h)}return i}var s=$(this.getDOMNode()),n=_.extend({marginLeft:0},this.props);if(n.element&&s.css("left",0).find(".balloon-arrow").css("left",""),n.element){var i,a=$(n.element),o=s.find(".balloon__arrow"),r=a.offset().left,l=a.outerWidth(),c=s.outerWidth(),u=s.offset().left,p=$(window).innerWidth(),h=n.elementCenter?n.elementCenter:l/2;t();var d=parseFloat(s.css("margin-left"));d&&(i+=d),s.css("left",i)}},render:function(){var e=React.addons.classSet,t=e({balloon:!0,"balloon--menu":this.props.isMenu,"balloon--help":this.props.help,"balloon--arrow-bottom":"bottom"===this.props.arrowPosition});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:""),onClick:this.props.onClick},!!this.props.arrow&&React.createElement("div",{className:"balloon__arrow"},React.createElement("div",{className:"balloon__arrow-scale-fix"}),React.createElement("div",{className:"balloon__arrow__shadow"})),this.props.children)}}),BalloonMenuElement=React.createClass({displayName:"BalloonMenuElement",render:function(){return this.props.link?React.createElement("a",{href:this.props.link,target:"true"===this.props.openInNewTab?"_blank":"_self",className:"balloon--menu__element-container",onClick:this.props.onClick},React.createElement("div",{className:"balloon--menu__element"},this.props.children)):React.createElement("div",{className:"balloon--menu__element-container",onClick:this.props.onClick},React.createElement("div",{className:"balloon--menu__element"},this.props.children))}}),BlockList=React.createClass({displayName:"BlockList",prepareElements:function(e){return e.map(function(e){return _.isObject(e)?_.has(e,"data")||(e.data=e.title):e={title:e,data:e},e})},getInitialState:function(){return{elements:this.prepareElements(this.props.elements)}},componentWillReceiveProps:function(e){this.setState({elements:this.prepareElements(e.elements)})},onElementClick:function(e){this.props.onElementClick(e.data)},render:function(){var e=this;return React.createElement("div",{className:"block-list "+(this.props.className?this.props.className:"")},_.map(this.state.elements,function(t,s){return React.createElement(BlockListElement,React.__spread({key:s},t,{onClick:e.onElementClick.bind(e,t)}))}))}}),BlockListElement=React.createClass({displayName:"BlockListElement",render:function(){var e=React.addons.classSet,t=e({"block-list__element":!0,"block-list__element--clickable":this.props.clickable!==!1&&!this.props.open});return React.createElement("div",{className:t,onClick:this.props.onClick},React.createElement("div",{className:"block-list__element-title"},this.props.title),this.props.note?React.createElement("div",{className:"block-list__element-note"},this.props.note):!1)}}),Button=React.createClass({displayName:"Button",componentWillReceiveProps:function(e){e.loading&&!this.props.loading?setTimeout(this.hideCursor,400):!e.loading&&this.props.loading&&$(this.getDOMNode()).css("cursor","")},hideCursor:function(){this.props.loading&&this.isMounted()&&$(this.getDOMNode()).css("cursor","default")},render:function(){var e=React.addons.classSet,t=e({button:!0,"button--loading":this.props.loading});return React.createElement("div",{className:t+" "+(this.props.className||""),onClick:this.props.onClick},React.createElement("span",null,this.props.children))}}),Checkbox=React.createClass({displayName:"Checkbox",mixins:[React.addons.PureRenderMixin],getInitialState:function(){return{checked:this.props.checked===!0,focus:!1}},componentWillReceiveProps:function(e){_.has(e,"checked")&&e.checked!==this.state.checked&&this.setState({checked:e.checked})},onContainerClick:function(e){var t=$(e.target);t.is(".checkbox__input")||t.closest(".checkbox__description").length||this.onChange()},onChange:function(){var e=!this.state.checked;this.setState({checked:e}),_.isFunction(this.props.onChange)&&this.props.onChange(e)},onInputFocus:function(){this.setState({focus:!0})},onInputBlur:function(){this.setState({focus:!1})},render:function(){var e=React.addons.classSet,t=e({checkbox:!0,"checkbox--biglabel":this.props.bigLabel,"checkbox--focus":this.state.focus,"checkbox--nolabel":!this.props.label,"checkbox--checked":this.state.checked,"checkbox--partially-checked":this.props.partiallyChecked});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:""),onClick:this.onContainerClick},React.createElement("input",{type:"checkbox",className:"checkbox__input",checked:this.state.checked,onChange:this.onChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur}),React.createElement("div",{className:"checkbox__icon"}),React.createElement("label",{className:"checkbox__text"},this.props.label),this.props.children)}}),CheckboxButton=React.createClass({displayName:"CheckboxButton",mixins:[React.addons.PureRenderMixin],getInitialState:function(){return{checked:this.props.checked===!0,focus:!1}},componentWillReceiveProps:function(e){_.has(e,"checked")&&e.checked!==this.state.checked&&this.setState({checked:e.checked})},onContainerClick:function(e){this.onChange()},onChange:function(){var e=!this.state.checked;!this.props.radio,_.isFunction(this.props.onChange)&&this.props.onChange(e)},onInputFocus:function(){this.setState({focus:!0})},onInputBlur:function(){this.setState({focus:!1})},render:function(){var e=React.addons.classSet,t=e({button:!0,"button--small":!0,"button--hover":this.state.focus,"button--selected":this.state.checked,"button--radio":this.props.radio});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:""),onClick:this.onContainerClick},React.createElement("input",{type:"checkbox",className:"checkbox__input",checked:this.state.checked,onChange:this.onChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur}),React.createElement("span",null,this.props.label))}}),CheckboxesRow=React.createClass({displayName:"CheckboxesRow",getInitialState:function(){var e=[];return _.each(this.props.elements,function(t,s){_.isObject(t)&&t.checked&&e.push(s)}),{checkedIndexes:e}},componentWillReceiveProps:function(e){if(this.props.elements!==e.elements){var t=[];_.each(e.elements,function(e,s){_.isObject(e)&&e.checked&&t.push(s)}),this.setState({checkedIndexes:t})}},onCheckboxClick:function(e,t){var s=this.state.checkedIndexes,n=s.indexOf(t),i=-1!==n;i?s.splice(n,1):s.push(t),this.setState({checkedIndexes:s}),_.isFunction(this.props.onCheckboxClick)&&this.props.onCheckboxClick(e,!i)},render:function(){var e=this,t=React.addons.classSet,s=t({"checkboxes-row":!0});return React.createElement("div",{className:s+" "+(this.props.className?this.props.className:"")
},this.props.label?React.createElement("label",{className:"input__title"},this.props.label):!1,_.map(this.props.elements,function(s,n){var i=_.isObject(s),a=i?s.text:s,o=i&&s.data?s.data:a,r=t({"row-checkbox":!0,"row-checkbox--checked":_.contains(e.state.checkedIndexes,n)});return React.createElement("div",{key:n,className:r,onClick:e.onCheckboxClick.bind(e,o,n)},a)}))}}),Dropdown=React.createClass({displayName:"Dropdown",prepareElements:function(e){return e.map(function(e){return _.isObject(e)?_.has(e,"data")||(e.data=e.text):e={text:e,data:e},e})},getElementByData:function(e,t){return _.find(e,function(e){return _.isEqual(e.data,t)})},getInitialState:function(){var e,t=this.prepareElements(this.props.elements);return _.has(this.props,"value")?e=this.props.value:_.has(this.props,"dataValue")?(e=this.getElementByData(t,this.props.dataValue),e=e&&e.text):e="",{selectedIndex:null,elements:t,open:this.props.open,value:e}},componentWillReceiveProps:function(e){var t,s=this.prepareElements(e.elements);_.has(this.props,"value")?t=this.props.value:_.has(this.props,"dataValue")&&(t=this.getElementByData(s,e.dataValue),t=t&&t.text),this.setState({value:t,elements:s})},componentDidUpdate:function(e,t){var s=this;t.open!==this.state.open&&(this.state.open?(this.enableDocumentListeners(),setTimeout(function(){s.show()},0)):(this.disableDocumentListeners(),this.hide()))},onFocus:function(){this.show(),_.isFunction(this.props.onFocus)&&this.props.onFocus()},show:function(){this.setState({selectedIndex:null,open:!0})},hide:function(){this.setState({open:!1})},onClick:function(){this.state.open&&this.refs.input.getDOMNode().focus()},onMouseDown:function(e){this.setState({open:!this.state.open})},enableDocumentListeners:function(){$(document).bind("click",this.handleDocumentClick)},disableDocumentListeners:function(){$(document).unbind("click",this.handleDocumentClick)},componentWillUnmount:function(){this.disableDocumentListeners()},onElementHover:function(e){this.setState({selectedIndex:e}),_.isFunction(this.props.onElementHover)&&this.props.onElementHover(e)},onElementSelect:function(e){this.hide(),_.isFunction(this.props.onChange)&&this.props.onChange(e)},handleDocumentClick:function(e){!this.isMounted()||$(e.target).closest($(this.getDOMNode())).length&&!$(e.target).closest(".input__suggest__element").length||(this.props.onHide?(this.props.onHide(),this.disableDocumentListeners()):(this.disableDocumentListeners(),this.setState({open:!1})))},render:function(){var e=React.addons.classSet,t=e({input:!0,"input--dropdown":!0,"input--focus":this.state.open,"input--disabled":this.props.disabled});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:""),onMouseDown:this.onMouseDown,onClick:this.onClick},this.props.label?React.createElement("label",{className:"input__title"},this.props.label):!1,React.createElement("div",{className:"input__dropdown-value"},this.state.value),React.createElement("input",{ref:"input",readOnly:!0,value:this.state.value,onBlur:this.hide,onFocus:this.onFocus,placeholder:this.props.placeholder}),React.createElement("div",{className:"input__dropdown-icon"}),this.state.open&&React.createElement(DropdownElements,React.__spread({},_.omit(this.props,"className"),this.state,{onElementSelect:this.onElementSelect})))}}),DropdownElement=React.createClass({displayName:"DropdownElement",getInitialState:function(){return{value:this.getMatchedText(this.props.value,this.props.matchValue)}},componentWillReceiveProps:function(e){this.setState({value:this.getMatchedText(e.value,e.matchValue)})},getMatchedText:function(e,t){if(!t)return e;var s=e,n=t,i=s.toLowerCase(),a=_.uniq(n.trim().replace(/\s+/g," ").toLowerCase().split(" ")),o=_.every(a,function(e){return-1!==i.indexOf(e)});return o&&(_.each(a,function(e){var t=new RegExp("(^|[^Â ])("+RegExp.escape(e)+")","gi");s=s.replace(t,"$1Â $2Â ")}),s=s.replace(/\xA0([^\xA0]*)!?\xA0/g,'<span class="input__suggest__element__match">$1</span>')),s},render:function(){var e=React.addons.classSet,t=e({input__suggest__element:!0,"input__suggest__element--selected":this.props.hover}),s=this.state.value;return this.props.note&&(s+='<div class="input__suggest__element-note">'+this.props.note+"</div>"),React.createElement("div",{className:t+" "+(this.props.className||""),onMouseDown:this.props.onSelect,onMouseOver:this.props.onHover,dangerouslySetInnerHTML:{__html:s}})}}),DropdownElements=React.createClass({displayName:"DropdownElements",getInitialState:function(){var e=$("<div style='overflow: scroll; width: 50px'><div/></div>").appendTo("body"),t=50-e.children().width();return e.remove(),{selectedIndex:null,browserScrollbarWidth:t}},componentWillReceiveProps:function(e){this.props.elements!==e.elements&&this.onElementHover(null)},componentDidMount:function(){this.enableDocumentListeners();var e=$(this.refs.list.getDOMNode()),t=$(this.getDOMNode());e.css({width:t.width()+this.state.browserScrollbarWidth});var s=t.height(),n=e[0].scrollHeight;this.setState({scrollContainerHeight:s,scrollContentHeight:n,scrollable:n>s})},componentWillUnmount:function(){this.disableDocumentListeners()},onSctollbarMouseDown:function(e){this.setState({y:e.clientY,startScrollTop:this.refs.list.getDOMNode().scrollTop,scrollbarActive:!0}),$(document).unbind("mousemove",this.onSctollbarMouseMove),$(document).unbind("mouseup",this.onSctollbarMouseUp),$(document).bind("mousemove",this.onSctollbarMouseMove),$(document).bind("mouseup",this.onSctollbarMouseUp),e.preventDefault(),e.stopPropagation()},onSctollbarMouseMove:function(e){var t=e.clientY,s=this.state.scrollContainerHeight/this.state.scrollContentHeight,n=this.state.scrollContainerHeight*s,i=0,a=20;a>n&&(i=a-n,s=this.state.scrollContainerHeight/(this.state.scrollContentHeight+i/s));var o=(this.state.scrollContentHeight*s,this.state.startScrollTop+(t-this.state.y)/s),r={};this.refs.list.getDOMNode().scrollTop=o,r.scrollTop=o,this.setState(r),e.preventDefault()},onSctollbarMouseUp:function(){$(document).unbind("mousemove",this.onSctollbarMouseMove),$(document).unbind("mouseup",this.onSctollbarMouseUp),setTimeout(function(){this.setState({scrollbarActive:!1})}.bind(this),0)},enableDocumentListeners:function(){$(document).bind("keydown",this.handleDocumentKeydown),$(document).bind("click",this.handleDocumentClick),this.refs.list&&$(this.refs.list.getDOMNode()).bind("scroll",this.onListScroll)},disableDocumentListeners:function(){$(document).unbind("keydown",this.handleDocumentKeydown),$(document).bind("click",this.handleDocumentClick),this.refs.list&&$(this.refs.list.getDOMNode()).unbind("scroll",this.onListScroll)},onListScroll:function(e){var t=(e.target.scrollTop,this.state.scrollContainerHeight/this.state.scrollContentHeight),s=this.state.scrollContainerHeight*t,n=0,i=20;i>s&&(n=i-s,t=this.state.scrollContainerHeight/(this.state.scrollContentHeight+n/t)),this.setState({scrollTop:e.target.scrollTop}),this.refs.scrollbar.getDOMNode().style.top=this.state.scrollTop*t+"px"},onElementHover:function(e,t){this.setState({selectedIndex:e}),_.isFunction(this.props.onElementHover)&&this.props.onElementHover(e,t)},onElementSelect:function(e){_.isFunction(this.props.onElementSelect)&&this.props.onElementSelect(e)},handleDocumentKeydown:function(e){var t,s=e.keyCode,n=this.props.elements,i=n.length-1,a=this.state.selectedIndex;switch(s){case 40:for(t=null===a?0:a>=i?0:a+1;React.isValidElement(n[t]);)t=t>=i?0:t+1;this.onElementHover(t,e),e.preventDefault();break;case 38:for(t=a&&i>=a?a-1:i;React.isValidElement(n[t]);)t=t&&i>=t?t-1:i;this.onElementHover(t,e),e.preventDefault();break;case 13:if(null===this.state.selectedIndex)_.isFunction(this.props.onHide)&&this.props.onHide();else{var o=this.props.elements[this.state.selectedIndex],r=_.isObject(o),l=r?o.text:o,c=r&&o.data?o.data:l;this.onElementSelect(c)}}},handleDocumentClick:function(e){return!this.isMounted()||$(e.target).closest($(this.getDOMNode()).parent()).length&&!$(e.target).closest(".input__suggest__element").length?void 0:this.state.scrollbarActive?void e.stopImmediatePropagation():void(this.props.onHide&&this.props.onHide())},shouldComponentUpdate:function(e,t){var s=_.omit(this.props,["onHover","onSelect"]),n=_.omit(e,["onHover","onSelect"]),i=_.omit(this.state,["scrollTop","startScrollTop","y"]),a=_.omit(t,["scrollTop","startScrollTop","y"]);return!_.isEqual(s,n)||!_.isEqual(i,a)},render:function(){var e=this,t=React.addons.classSet,s=t({"input__suggest-wrapper":!0,"input__suggest-wrapper--scrollable":this.state.scrollable}),n=this.state.scrollContainerHeight/this.state.scrollContentHeight,i=this.state.scrollContainerHeight*n,a=20;a>i&&(i=a);var o={height:i+"px"},r=t({"input__suggest-scrollbar":!0,"input__suggest-scrollbar--active":this.state.scrollbarActive});return React.createElement("div",{className:s+" "+(this.props.className?this.props.className:"")},React.createElement("div",{ref:"list",className:"input__suggest"},_.map(this.props.elements,function(t,s){if(React.isValidElement(t))return React.addons.cloneWithProps(t,{key:s});var n=_.isObject(t),i=n?t.text:t,a=n&&t.note,o=n&&t.data?t.data:i,r=s===e.state.selectedIndex,l=function(){e.onElementSelect(o)};return React.createElement(DropdownElement,{key:s,onSelect:l,value:i,note:a,matchValue:t.match!==!1&&e.props.matchValue,hover:r,onHover:e.onElementHover.bind(e,s)})})),this.state.scrollable&&React.createElement("div",{style:o,ref:"scrollbar",className:r,onMouseDown:this.onSctollbarMouseDown}))}}),EditableTitle=React.createClass({displayName:"EditableTitle",mixins:[React.addons.LinkedStateMixin],getInitialState:function(){return{value:this.props.value,editing:!1,editable:this.props.editable!==!1}},componentDidMount:function(){var e=this.refs.input.getDOMNode();$(e).on("focus",function(){}),$(e).on("blur",function(){})},componentWillUnmount:function(){$(document).unbind("click",this.onDocumentClick)},componentWillReceiveProps:function(e){var t=_.has(e,"editing")?e.editing:this.state.editing;this.setState({value:e.value,editable:e.editable!==!1,editing:t},function(){!t&&this.state.editing&&this.onSave()}.bind(this))},componentWillUpdate:function(e,t){this.state.editing!==t.editing&&(t.editing?$(document).bind("click",this.onDocumentClick):$(document).unbind("click",this.onDocumentClick))},componentDidUpdate:function(e,t){if(!t.editing&&this.state.editing){var s=this.refs.input.getDOMNode(),n=this.state.value.length;s.focus(),s.setSelectionRange&&(s.setSelectionRange(n,n),s.scrollLeft=s.scrollWidth)}},onDocumentClick:function(e){if(this.state.editing){var t=this.refs.input&&this.refs.input.getDOMNode(),s=this.refs.value&&this.refs.value.getDOMNode(),n=$(e.target);n.is(t)||n.is(s)||this.onSave(e)}},onKeyDown:function(e){switch(e.key){case"Enter":this.onSave(e);break;case"Escape":this.onCancel(e);break;case"Tab":e.preventDefault()}},onSave:function(e){return this.state.value?(_.has(this.props,"editing")||this.setState({editing:!1}),void(_.isFunction(this.props.onChange)&&this.props.onChange(this.state.value,e))):void this.onCancel()},onCancel:function(e){this.setState({editing:!1,value:this.props.value}),_.isFunction(this.props.onChange)&&this.props.onChange(this.props.value,e)},onClick:function(){this.state.editable&&!isMobileDevice()&&(this.setState({editing:!0}),_.isFunction(this.props.onFocus)&&this.props.onFocus())},render:function(){var e=this.state.editing,t=this.state.editable,s=React.addons.classSet,n=s({"editable-title":!0,"editable-title--editing":e,"editable-title--editable":t});return React.createElement("div",{className:n+" "+(this.props.className||"")},React.createElement("input",{autoComplete:"off",ref:"input",className:"editable-title__input",valueLink:this.linkState("value"),onKeyDown:this.onKeyDown,onBlur:this.onSave}),React.createElement("div",{className:"editable-title__value-container"},React.createElement("span",{ref:"value",className:"editable-title__value",title:this.state.value},this.state.value)),!e&&React.createElement("div",{className:"editable-title__btn-edit",onClick:this.onClick}))}}),FormRow=React.createClass({displayName:"FormRow",render:function(){var e=React.addons.classSet,t=e({"form-row":!0,"form-row--paddless-inside":this.props.paddlessInside,"form-row--paddless-outside":this.props.paddlessOutside,"form-row--removeable":this.props.removeable});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:"")},this.props.label?React.createElement("div",{className:"input__title form-row__title"},this.props.label):!1,this.props.children,this.props.removeable?React.createElement("div",{className:"form-row__btn-remove close-button",onClick:this.props.onRemove}):!1)}}),Input=React.createClass({displayName:"Input",getAcceptedChars:function(e){if(("price"===this.props.type||"weight"===this.props.type)&&(e=["digits",",","."]),e){e=_.chain(e).map(function(e){return"digits"===e&&(e=["0-9"]),"latin"===e&&(e=["A-z"]),e}).flatten().value();var t="[^"+e.join("").replace(/(.)/g,"$1")+"]";return e={chars:e,test:function(e){var s=new RegExp(t);return!s.test(e)},replace:function(e){var s=new RegExp(t,"g");return e.replace(s,"")}}}},getInitialState:function(){return{focus:!1,paddingLeft:0,acceptedChars:this.getAcceptedChars(this.props.acceptedChars)}},componentWillReceiveProps:function(e){this.setState({acceptedChars:this.getAcceptedChars(e.acceptedChars)})},componentDidMount:function(){var e=this.refs.input.getDOMNode();if(this.props.unit){var t=$(e),s=$(this.refs.unit.getDOMNode()),n=parseInt(t.css("padding-right"))+s.outerWidth();t.css("padding-right",n)}$(e).on("focus",function(){}),$(e).on("blur",function(){}),this.setState({paddingLeft:parseInt($(e).css("padding-left"))+1}),this.props.focusOnMount&&this.refs.input.getDOMNode().focus()},getInputCursorPosition:function(){var e=this.refs.input.getDOMNode(),t=0;if(document.selection){e.focus();var s=document.selection.createRange();s.moveStart("character",-e.value.length),t=s.text.length}else _.isNumber(e.selectionStart)&&(t=e.selectionStart);return t},onFocus:function(){this.setState({focus:!0}),_.isFunction(this.props.onFocus)&&this.props.onFocus()},onBlur:function(){this.setState({focus:!1}),_.isFunction(this.props.onBlur)&&this.props.onBlur()},onClick:function(){this.refs.input.getDOMNode().focus(),this.setState({focus:!0})},onKeyDown:function(e){"Enter"===e.key&&(_.isFunction(this.props.onEnterPress)&&this.props.onEnterPress(),this.props.search&&this.onSearch(e.target.value)),"Escape"===e.key&&_.isFunction(this.props.onEscPress)&&this.props.onEscPress(),_.isFunction(this.props.onKeyDown)&&this.props.onKeyDown()},onKeyPress:function(e){this.state.acceptedChars&&!this.state.acceptedChars.test(e.key)&&e.preventDefault()},setCaretPos:function(e){var t,s=function(){if("selectionStart"in t&&"selectionEnd"in t)t.selectionStart=t.selectionEnd=e;else if("setSelectionRange"in t)t.setSelectionRange(e,e);else{var s=t.createTextRange();s.collapse(!0),s.moveStart("character",e),s.moveEnd("character",0),s.select()}};this.isMounted()&&(t=this.refs.input.getDOMNode(),s(),setTimeout(s,0))},onChange:function(e){if(this.state.acceptedChars){var t=(e.target,this.getInputCursorPosition());"price"===this.props.type?(e.target.value=e.target.value.replace(/[^0-9,\,,\.]/g,"").replace(/(,|\.)+([0-9]{0,2}).*$/,",$2").replace(/^0+/,""),/^,/.test(e.target.value)&&(e.target.value=e.target.value.replace(/^,/,"0,"),t++)):"weight"===this.props.type?(e.target.value=e.target.value.replace(/[^0-9,\,,\.]/g,"").replace(/(,|\.)+([0-9]{0,3}).*$/,",$2").replace(/^0+/,"0").replace(/^0(\d+)/,"$1"),/^,/.test(e.target.value)&&(e.target.value=e.target.value.replace(/^,/,"0,"),t++)):e.target.value=this.state.acceptedChars.replace(e.target.value),this.setCaretPos(t)}"date"===this.props.type&&(e.target.value=e.target.value.substr(0,10)),this.props.onChange&&this.props.onChange(e.target.value,e)},onSearch:function(){_.isFunction(this.props.onSearch)&&this.props.onSearch(this.refs.input.getDOMNode().value)},onShowPasswordClick:function(){this.setState({showPassword:!this.state.showPassword})},render:function(){var e=("password"===this.props.type,"datepicker"===this.props.type),t=this.props.loading,s=React.addons.classSet,n=s({input:!0,"input--focus":this.state.focus&&!this.props.disabled,"input--label-right":this.props.labelRight,"input--label-light":this.props.labelLight,"input--invalid":this.props.invalid,"input--disabled":this.props.disabled,"input--search":!t&&this.props.search,"input--loading":t,"input--datepicker":e}),i=s({input__title:!0}),a=this.props.mask||"date"===this.props.type&&"99.99.9999",o="date"!==this.props.type&&this.props.type||"text",r=this.props.unit;!this.props.type&&_.isEqual(this.props.acceptedChars,["digits"])||"date"===this.props.type||e?o="tel":"password"===o&&this.state.showPassword||"price"===o?("price"===o&&!_.has(this.props,"unit"),o="text"):"weight"===o&&(o="tel");var l=!!this.props.placeholder&&!this.props.value;return React.createElement("div",{onClick:this.onClick,className:n+" "+(this.props.className?this.props.className:"")},this.props.label?React.createElement("label",{className:i},this.props.label):!1,!!r&&React.createElement("div",{ref:"unit",className:"input__unit"},r),l&&React.createElement("div",{ref:"placeholder",className:"input__placeholder",style:{paddingLeft:this.state.paddingLeft}},this.props.placeholder),React.createElement(InputElement,{type:o,readOnly:this.props.disabled,ref:"input",value:this.props.value,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.props.valueLink?null:this.onChange,onKeyPress:this.onKeyPress,valueLink:this.props.valueLink,onKeyDown:this.onKeyDown,mask:a,maxLength:this.props.maxLength}),!t&&this.props.search&&React.createElement("div",{className:"input__btn-search",onClick:this.onSearch}),t&&React.createElement("div",{className:"input__loading-icon"}),this.props.children,this.props.invalid&&this.props.errorMessage&&React.createElement(InputErrorMessage,null,this.props.errorMessage))}}),InputErrorMessage=React.createClass({displayName:"InputErrorMessage",render:function(){return React.createElement("div",{className:"input__error-message"},this.props.children)}}),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},InputElement=React.createClass({displayName:"InputElement",charsRules:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},defaultMaskChar:"_",lastCaretPos:null,isAndroidBrowser:function(){var e=new RegExp("windows","i"),t=new RegExp("firefox","i"),s=new RegExp("android","i"),n=navigator.userAgent;return!e.test(n)&&!t.test(n)&&s.test(n)},isDOMElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:1===e.nodeType&&"string"==typeof e.nodeName},getInputDOMNode:function(){var e=this.refs.input;return this.isDOMElement(e)?e:e.getDOMNode()},getPrefix:function(){for(var e=arguments.length<=0||void 0===arguments[0]?this.state:arguments[0],t="",s=e.mask,n=null!=s?s.length:0,i=0;n>i&&this.isPermanentChar(i,e);++i)t+=s[i];return t},getFilledLength:function(e){var t,s=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1];null==e&&(e=s.value);var n=s.maskChar;if(!n)return e.length;for(t=e.length-1;t>=0;--t){var i=e[t];if(!this.isPermanentChar(t,s)&&this.isAllowedChar(i,t,s))break}return++t||this.getPrefix(s).length},getLeftEditablePos:function(e){for(var t=e;t>=0;--t)if(!this.isPermanentChar(t))return t;return null},getRightEditablePos:function(e){for(var t=this.state.mask,s=null!=t?t.length:0,n=e;s>n;++n)if(!this.isPermanentChar(n))return n;return null},isEmpty:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?this.state.value:arguments[0],s=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1];return!t.split("").some(function(t,n){return!e.isPermanentChar(n,s)&&e.isAllowedChar(t,n,s)})},isFilled:function(){var e=arguments.length<=0||void 0===arguments[0]?this.state.value:arguments[0],t=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1],s=null!=t.mask?t.mask.length:0;return this.getFilledLength(e,t)===s},createFilledArray:function(e,t){for(var s=[],n=0;e>n;n++)s[n]=t;return s},formatValue:function(e){var t=this,s=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1],n=s.maskChar,i=s.mask,a=null!=i?i.length:0;if(!n){var o=this.getPrefix(s).length;for(e=this.insertRawSubstr("",e,0,s);e.length>o&&this.isPermanentChar(e.length-1,s);)e=e.slice(0,e.length-1);return e}if(e){var r=this.formatValue("",s);return this.insertRawSubstr(r,e,0,s)}return e.split("").concat(this.createFilledArray(a-e.length,null)).map(function(e,a){return t.isAllowedChar(e,a,s)?e:t.isPermanentChar(a,s)?i[a]:n}).join("")},clearRange:function(e,t,s){var n=this,i=t+s,a=this.state.maskChar;if(!a){var o=this.getPrefix().length;return e=e.split("").filter(function(e,s){return o>s||t>s||s>=i}).join(""),this.formatValue(e)}var r=this.state.mask;return e.split("").map(function(e,s){return t>s||s>=i?e:n.isPermanentChar(s)?r[s]:a}).join("")},replaceSubstr:function(e,t,s){return e.slice(0,s)+t+e.slice(s+t.length)},insertRawSubstr:function(e,t,s){var n=arguments.length<=3||void 0===arguments[3]?this.state:arguments[3],i=n.mask,a=n.maskChar,o=null!=i?i.length:0,r=this.isFilled(e,n);t=t.split("");for(var l=s;o>l&&t.length;)if(this.isPermanentChar(l,n)&&i[l]!==t[0])!a&&l>=e.length&&(e+=i[l]),++l;else{var c=t.shift();this.isAllowedChar(c,l,n,!0)&&(l<e.length?e=a||r?this.replaceSubstr(e,c,l):this.formatValue(e.substr(0,l)+c+e.substr(l),n):a||(e+=c),++l)}return e},getRawSubstrLength:function(e,t,s){var n=arguments.length<=3||void 0===arguments[3]?this.state:arguments[3],i=n.mask,a=(n.maskChar,null!=i?i.length:0);t=t.split("");for(var o=s;a>o&&t.length;)if(this.isPermanentChar(o,n)&&i[o]!==t[0])++o;else{var r=t.shift();this.isAllowedChar(r,o,n,!0)&&++o}return o-s},isAllowedChar:function(e,t){var s=arguments.length<=2||void 0===arguments[2]?this.state:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],i=s.mask,a=s.maskChar;if(this.isPermanentChar(t,s))return i[t]===e;var o=i[t],r=this.charsRules[o];return new RegExp(r).test(e||"")||n&&e===a},isPermanentChar:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.state:arguments[1];return-1!==t.permanents.indexOf(e)},setCaretToEnd:function(){var e=this.getFilledLength(),t=this.getRightEditablePos(e);null!==t&&this.setCaretPos(t)},getSelection:function(){var e=this.getInputDOMNode(),t=0,s=0;if("selectionStart"in e&&"selectionEnd"in e)t=e.selectionStart,s=e.selectionEnd;else{var n=document.selection.createRange(),i=e.value.length,a=e.createTextRange();a.moveToBookmark(n.getBookmark()),t=-a.moveStart("character",-i),s=-a.moveEnd("character",-i)}return{start:t,end:s,length:s-t}},getCaretPos:function(){var e=this.getInputDOMNode(),t=0;if("selectionStart"in e)t=e.selectionStart;else{var s=document.selection.createRange(),n=s.text.length;s.moveStart("character",-e.value.length),t=s.text.length-n}return t},setCaretPos:function(e){var t,s=function(){if("selectionStart"in t&&"selectionEnd"in t)t.selectionStart=t.selectionEnd=e;else if("setSelectionRange"in t)t.setSelectionRange(e,e);else{var s=t.createTextRange();s.collapse(!0),s.moveStart("character",e),s.moveEnd("character",0),s.select()}};this.isMounted()&&(t=this.getInputDOMNode(),s(),setTimeout(s,0)),this.lastCaretPos=e},isFocused:function(){return document.activeElement===this.getInputDOMNode()},parseMask:function(e){var t=this;if("string"!=typeof e)return{mask:null,permanents:[]};var s="",n=[],i=!1;return e.split("").forEach(function(e){i||"\\"!==e?((i||!t.charsRules[e])&&n.push(s.length),s+=e,i=!1):i=!0}),{mask:s,permanents:n}},getStringValue:function(e){return e||0===e?e+"":""},getInitialState:function(){var e=this.parseMask(this.props.mask),t=null!=this.props.defaultValue?this.props.defaultValue:null,s=null!=this.props.value?this.props.value:t;s=this.getStringValue(s);var n={mask:e.mask,permanents:e.permanents,maskChar:"maskChar"in this.props?this.props.maskChar:this.defaultMaskChar};return(this.props.alwaysShowMask||s)&&(s=this.formatValue(s,n)),n.value=s,n},componentWillMount:function(){var e=this.state,t=e.mask,s=e.value;t&&s&&this.setState({value:s})},componentWillReceiveProps:function(e){var t=this.parseMask(e.mask),s="maskChar"in e?e.maskChar:this.defaultMaskChar,n={mask:t.mask,permanents:t.permanents,maskChar:s},i=void 0!==e.value?this.getStringValue(e.value):this.state.value,a=t.mask&&t.mask!==this.state.mask,o=e.alwaysShowMask||this.isFocused();(a||t.mask&&(i||o))&&(i=this.formatValue(i,n)),t.mask&&this.isEmpty(i,n)&&!o&&(i=""),this.state.value!==i&&(n.value=i),this.setState(n)},componentDidUpdate:function(e,t){var s=this.state.mask;if(s){var n=s&&s!==t.mask,i=this.lastCaretPos,a=this.getFilledLength();n&&i>a&&this.setCaretPos(this.getRightEditablePos(a))}},onKeyDown:function(e){var t="function"==typeof this.props.onKeyDown;if(e.ctrlKey||e.metaKey)return void(t&&this.props.onKeyDown(e));var s=this.getCaretPos(),n=this.state.value,i=e.key,a=!1;switch(i){case"Backspace":case"Delete":var o=this.getPrefix().length,r="Delete"===i,l=this.getSelection();if(l.length)n=this.clearRange(n,l.start,l.length);else if(o>s||!r&&s===o)s=o;else{var c=r?this.getRightEditablePos(s):this.getLeftEditablePos(s-1);null!==c&&(n=this.clearRange(n,c,1),s=c)}a=!0}t&&this.props.onKeyDown(e),n!==this.state.value&&(e.target.value=n,this.setState({value:n}),a=!0,"function"==typeof this.props.onChange&&this.props.onChange(e)),a&&(e.preventDefault(),this.setCaretPos(s))},onKeyPress:function(e){var t=e.key,s="function"==typeof this.props.onKeyPress;if("Enter"===t||e.ctrlKey||e.metaKey)return void(s&&this.props.onKeyPress(e));var n=this.getCaretPos(),i=this.state,a=i.value,o=i.mask,r=(i.maskChar,null!=o?o.length:0,this.getPrefix().length);if(this.isPermanentChar(n)&&o[n]===t)a=this.insertRawSubstr(a,t,n),++n;else{var l=this.getRightEditablePos(n);null!==l&&this.isAllowedChar(t,l)&&(a=this.insertRawSubstr(a,t,n),n=l+1)}for(a!==this.state.value&&(e.target.value=a,this.setState({value:a}),"function"==typeof this.props.onChange&&this.props.onChange(e)),e.preventDefault();n>r&&this.isPermanentChar(n);)++n;this.setCaretPos(n)},onChange:function(e){var t=this.pasteSelection;if(t)return this.pasteSelection=null,void this.pasteText(this.state.value,e.target.value,t);var s=this.getCaretPos(),n=null!=this.state.mask?this.state.mask.length:0,i=this.state.maskChar,a=e.target,o=a.value,r=o.length;if(r>n)o=o.substr(0,n);else if(i&&n>r){var l=n-r;o=this.clearRange(this.state.value,s,l)}a.value=this.formatValue(o),this.setState({value:a.value}),this.setCaretPos(s),"function"==typeof this.props.onChange&&this.props.onChange(e)},onFocus:function(e){var t=null!=this.state.mask?this.state.mask.length:0;if(this.state.value)this.getFilledLength()<t&&this.setCaretToEnd();else{var s=this.getPrefix(),n=this.formatValue(s);e.target.value=this.formatValue(n),this.setState({value:n},this.setCaretToEnd),"function"==typeof this.props.onChange&&this.props.onChange(e)}"function"==typeof this.props.onFocus&&this.props.onFocus(e)},onBlur:function(e){!this.props.alwaysShowMask&&this.isEmpty(this.state.value)&&(e.target.value="",this.setState({value:""}),"function"==typeof this.props.onChange&&this.props.onChange(e)),"function"==typeof this.props.onBlur&&this.props.onBlur(e)},onPaste:function(e){if(this.isAndroidBrowser())return this.pasteSelection=this.getSelection(),void(e.target.value="");var t;if(window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),t){var s=this.state.value,n=this.getSelection();this.pasteText(s,t,n)}e.preventDefault()},pasteText:function(e,t,s){var n=s.start;s.length&&(e=this.clearRange(e,n,s.length));var i=this.getRawSubstrLength(e,t,n),e=this.insertRawSubstr(e,t,n);n+=i,n=this.getRightEditablePos(n)||n,e!==this.getInputDOMNode().value&&(event.target.value=e,this.setState({value:e}),"function"==typeof this.props.onChange&&this.props.onChange(event)),this.setCaretPos(n)},render:function(){var e=this,t={};if(this.state.mask){var s=["onFocus","onBlur","onChange","onKeyDown","onKeyPress","onPaste"];s.forEach(function(s){t[s]=e[s]}),t.value=this.state.value}return React.createElement("input",_extends({ref:"input"},this.props,t))}}),InputGroup=React.createClass({displayName:"InputGroup",getInitialState:function(){var e=[];return React.Children.forEach(this.props.children,function(t){e.push(t)}),{childs:e}},componentWillReceiveProps:function(e){if(this.props.children!==e.children){var t=[];React.Children.forEach(e.children,function(e){t.push(e)}),this.setState({childs:t})}},render:function(){for(var e=this.state.childs,t=0,s=0,n=this.props.glue,i=[];t<e.length;){var a=e[t++];a.key=s++,i.push(a),n&&t<e.length&&i.push(React.createElement("span",{key:s++,className:"input-group__glue"},n))}return React.createElement("div",{className:"input-group"},i)}}),Popup=React.createClass({displayName:"Popup",componentDidMount:function(){$(document).on("keydown",this.onDocumentKeyDown)},componentWillUnmount:function(){$(document).off("keydown",this.onDocumentKeyDown)},onDocumentKeyDown:function(e){27===e.keyCode&&this.onHide()},onContainerClick:function(e){var t=$(e.target);t.is(this.refs.container.getDOMNode())&&this.onHide()},onHide:function(){_.isFunction(this.props.onHide)&&this.props.onHide()},render:function(){return React.createElement(React.addons.CSSTransitionGroup,{transitionName:"popup-container",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.props.visible&&React.createElement(PopupContainer,{ref:"container",onClick:this.onContainerClick,onHideEnd:this.props.onHideEnd,className:this.props.className,style:this.props.style,key:"1"},this.props.children))}}),PopupContainer=React.createClass({displayName:"PopupContainer",componentWillUnmount:function(){_.isFunction(this.props.onHideEnd)&&this.props.onHideEnd()},render:function(){return React.createElement("div",{className:"popup-container",onClick:this.props.onClick,key:"1"},React.createElement("div",{className:"popup "+(this.props.className||""),style:this.props.style},this.props.children))}}),RadioButton=React.createClass({displayName:"RadioButton",onClick:function(){this.props.inRadioButtonGroup?this.props.onClick(this._currentElement,this.props._onClick):this.props.onClick()},render:function(){var e=React.addons.classSet,t=e({"radio-button":!0,"radio-button--checked":this.props.checked});return React.createElement("div",{className:t+" "+(this.props.className?this.props.className:""),onClick:this.onClick},React.createElement("div",{className:"radio-button__icon"}),React.createElement("label",{className:"radio-button__label"},this.props.label))}}),RadioButtonGroup=React.createClass({displayName:"RadioButtonGroup",getInitialState:function(){return{checkedButton:null}},onClick:function(e,t){this.setState({checkedButton:e}),t()},render:function(){var e=this,t=function(s){if(_.isArray(s))return React.Children.map(s,t);"RadioButton"===s.type.displayName&&(s.props.onClick&&(s.props._onClick=s.props.onClick,s.props.onClick=e.onClick),s.props.checked=e.state.checkedButton===s,s.props.inRadioButtonGroup=!0);var n=s.props.children;n&&(_.isArray(n)?React.Children.map(n,t):t(n))};return t(this.props.children),React.createElement("div",{className:"radio-button-group"},this.props.children)}}),Textarea=React.createClass({displayName:"Textarea",HIDDEN_TEXTAREA_STYLE:"\n        min-height:none !important;\n        max-height:none !important;\n        height:0 !important;\n        visibility:hidden !important;\n        overflow:hidden !important;\n        position:absolute !important;\n        z-index:-1000 !important;\n        top:0 !important;\n        right:0 !important\n    ",SIZING_STYLE:["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","padding-left","padding-right","border-width","box-sizing"],
computedStyleCache:{},hiddenTextarea:void 0,getComputedStyle:function(){function e(t,s,n){var i,a=t.currentStyle[s].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],o=a[1],r=a[2];return n=null!=n?n:/%|em/.test(r)&&t.parentElement?e(t.parentElement,"fontSize",null):16,i="fontSize"==s?n:/width/i.test(s)?t.clientWidth:t.clientHeight,"%"==r?o/100*i:"cm"==r?.3937*o*96:"em"==r?o*n:"in"==r?96*o:"mm"==r?.3937*o*96/10:"pc"==r?12*o*96/72:"pt"==r?96*o/72:o}function t(e,t){var s="border"==t?"Width":"",n=t+"Top"+s,i=t+"Right"+s,a=t+"Bottom"+s,o=t+"Left"+s;e[t]=(e[n]==e[i]&&e[n]==e[a]&&e[n]==e[o]?[e[n]]:e[n]==e[a]&&e[o]==e[i]?[e[n],e[i]]:e[o]==e[i]?[e[n],e[i],e[a]]:[e[n],e[i],e[a],e[o]]).join(" ")}function s(s){var i=this,a=s.currentStyle,o=e(s,"fontSize");for(property in a)n.call(i,"styleFloat"==property?"float":property.replace(/[A-Z]/,function(e){return"-"+e.toLowerCase()})),"width"==property?i[property]=s.offsetWidth+"px":"height"==property?i[property]=s.offsetHeight+"px":"styleFloat"==property?i["float"]=a[property]:/margin.|padding.|border.+W/.test(property)&&"auto"!=i[property]?i[property]=Math.round(e(s,property,o))+"px":i[property]=a[property];t(i,"margin"),t(i,"padding"),t(i,"border"),i.fontSize=Math.round(o)+"px"}var n=Array.prototype.push;return s.prototype={constructor:s,getPropertyPriority:function(){throw Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(e){return this[e.replace(/-\w/g,function(e){return e[1].toUpperCase()})]},item:function(e){return this[e]},removeProperty:function(){throw Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw Error("NotSupportedError: DOM Exception 9")}},function(e){return new s(e)}}(),getHiddenHeight:function(e){window.getComputedStyle?(height=this.hiddenTextarea.scrollHeight,e(height)):setImmediate(function(){height=this.hiddenTextarea.scrollHeight,e(height)}.bind(this))},calculateNodeHeight:function(e,t,s,n,i){void 0===s&&(s=null),void 0===n&&(n=null),this.hiddenTextarea||(this.hiddenTextarea=document.createElement("textarea"),document.body.appendChild(this.hiddenTextarea));var a=this.calculateNodeStyling(e,t),o=a.paddingSize,r=a.borderSize,l=a.boxSizing,c=a.sizingStyle;this.hiddenTextarea.setAttribute("style",c+";"+this.HIDDEN_TEXTAREA_STYLE),this.hiddenTextarea.value=e.value||e.placeholder||"";var u=-(1/0),p=1/0;this.getHiddenHeight(function(e){if("border-box"===l?e+=r:"content-box"===l&&(e-=o),null!==s||null!==n){this.hiddenTextarea.value="";var t=this.hiddenTextarea.scrollHeight-o;null!==s&&(u=t*s,"border-box"===l&&(u=u+o+r),e=Math.max(u,e)),null!==n&&(p=t*n,"border-box"===l&&(p=p+o+r),e=Math.min(p,e))}i.call(this,{height:e,minHeight:u,maxHeight:p})}.bind(this))},calculateNodeStyling:function(e,t){var s=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&this.computedStyleCache[s])return this.computedStyleCache[s];var n=(window.getComputedStyle||this.getComputedStyle)(e),i=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),a=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),r=this.SIZING_STYLE.map(function(e){return e+":"+n.getPropertyValue(e)}).join(";"),l={sizingStyle:r,paddingSize:a,borderSize:o,boxSizing:i};return t&&s&&(this.computedStyleCache[s]=l),l},_resizeComponent:function(){var e=this.props,t=e.useCacheForDOMMeasurements;this.calculateNodeHeight(this.refs.textarea.getDOMNode(),t,this.props.rows||this.props.minRows,this.props.maxRows,this.setState)},getInitialState:function(){return{focus:!1,maxLength:this.props.maxLength,scrollable:!1,value:this.props.value||""}},componentDidMount:function(){this._resizeComponent();var e=$(this.refs.textarea.getDOMNode());e.on("focus",function(){}),e.on("blur",function(){});var t=$(this.refs.container.getDOMNode());this.setState({paddingLeft:parseInt(t.css("padding-left"))+1})},componentDidUpdate:function(e,t){t.value!==this.state.value&&this._resizeComponent()},componentWillReceiveProps:function(e){this.setState({value:e.value||""})},onFocus:function(){this.setState({focus:!0})},onBlur:function(){this.setState({focus:!1}),this.props.onBlur&&this.props.onBlur()},onChange:function(e){if(this.state.acceptedChars){var t=e.target,s=this.getInputCursorPosition(t);e.target.value=this.state.acceptedChars.replace(e.target.value),t.setSelectionRange(s,s)}!this.props.autosize&&e.target.scrollHeight>e.target.clientHeight?this.state.scrollable||this.setState({scrollable:!0}):this.state.scrollable&&this.setState({scrollable:!1}),this.props.onChange?this.props.onChange(e.target.value,e):this.setState({value:e.target.value}),this._resizeComponent()},onClick:function(){this.refs.textarea.getDOMNode().focus()},render:function(){var e=React.addons.classSet,t=e({input:!0,"input--textarea":!0,"input--focus":this.state.focus,"input--label-right":this.props.labelRight,"input--label-light":this.props.labelLight,"input--nolabel":!this.props.label,"input--invalid":this.props.invalid,"input--disabled":this.props.disabled}),s=e({input__title:!0}),n=this.state.value,i=!!this.props.placeholder&&!n,a={};return this.props.autosize&&(a={height:this.state.height,overflow:"hidden",paddingRight:0}),React.createElement("div",{onClick:this.onClick,className:t+" "+(this.props.className?this.props.className:"")},!!this.props.label&&React.createElement("label",{className:s},this.props.label),i&&React.createElement("div",{ref:"placeholder",className:"input__placeholder input__placeholder--textarea",style:{paddingLeft:this.state.paddingLeft}},this.props.placeholder),React.createElement("div",{ref:"container",className:"input__textarea-container"},React.createElement("textarea",{ref:"textarea",style:a,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,maxLength:this.props.maxLength,value:n}),this.state.scrollable&&React.createElement(TextareaScrollbar,{textarea:this.refs.textarea})))}}),TextareaScrollbar=React.createClass({displayName:"TextareaScrollbar",getDimensions:function(e){e=e||this.props;var t=this.props.textarea.getDOMNode(),s=t,n=s.clientHeight,i=s.scrollHeight,a=this.isMounted(),o=a?$(this.getDOMNode()).height():0,r=Math.max(n/i*o,20);return{clientHeight:n,scrollHeight:i,scrollbarHeight:o,lineHeight:r,maxScroll:i-n,scrollRatio:(i-n)/(o-r)}},getInitialState:function(){return _.extend({scrollTop:this.props.scrollTop,height:0,scrollbarHeight:0},this.getDimensions())},componentWillReceiveProps:function(e){this.setState(this.getDimensions(e))},componentDidMount:function(){var e=this.props.textarea.getDOMNode(),t=$(e);t.unbind("scroll",this.onScroll).bind("scroll",this.onScroll),this.setState(this.getDimensions())},componentWillUnmount:function(){if(this.props.textarea.isMounted()){var e=$(this.props.textarea.getDOMNode());e.unbind("scroll",this.onScroll)}},onScroll:function(e){this.state.active||this.setState({scrollTop:e.target.scrollTop})},onMouseDown:function(e){this.setState({y:e.clientY,startScrollTop:this.props.textarea.getDOMNode().scrollTop,active:!0}),$(document).unbind("mousemove",this.onMouseMove),$(document).unbind("mouseup",this.onMouseUp),$(document).bind("mousemove",this.onMouseMove),$(document).bind("mouseup",this.onMouseUp),e.preventDefault()},onMouseMove:function(e){var t=e.clientY,s=(this.props.textarea.getDOMNode(),this.state.scrollRatio),n=this.state.startScrollTop+(t-this.state.y)*s,i={};0>=n?n=0:n>=this.state.maxScroll&&(n=this.state.maxScroll),this.props.textarea.getDOMNode().scrollTop=n,i.scrollTop=n,this.setState(i),e.preventDefault()},onMouseUp:function(){$(document).unbind("mousemove",this.onMouseMove),$(document).unbind("mouseup",this.onMouseUp),this.setState({active:!1})},render:function(){var e=React.addons.classSet,t=e({input__scrollbar:!0,"input__scrollbar--active":this.state.active}),s={top:this.state.scrollTop/this.state.scrollRatio+"px",height:this.state.lineHeight};return React.createElement("div",{className:t},React.createElement("div",{style:s,className:"input__scrollbar-line",onMouseDown:this.onMouseDown}))}});